# 响应式设计基础
> 响应式 Web 设计综合运用了弹性网格布局、弹性图片/媒体、媒体查询三种技术，使得网页内容会随着访问它的视口及设备的不同而呈现不同的样式。

实现从最简单的体验开始，逐步扩充(渐进增强)。可以使用工具来完成自动化，使用 PostCSS 帮助处理浏览器前缀等。

iPhone默认会按照 980px 宽度来渲染页面，然后再把页面缩小呈现现在视口当中。浏览器用于呈现网页的区域叫视口(`viewport`)。视口通常并不等于屏幕大小，特别在可以缩放浏览器窗口的情况下。
```html
<meta name="viewport" content="width=device-width">
```
`<meta>`标签的意思是: 按照设备宽度(device-width)来渲染网页内容。

图片处理:
```css
img {max-width: 100%;}
```
声明`max-width`规则，保证所有图片最大显示为其自身的 100%,如果包含图片元素比图片固有宽度小，图片会缩放沾满最大可用空间。如果要实现图片自动缩放，也可使用`width: 100%`，那么图片就会按照width显示，不考虑自身固有宽度。容器宽时造成图片拉伸。

> 断点: 就是某个宽度临界点，跨过这个点布局就会发生显著变化。推荐不针对流行设备宽度设置断点，因为这样实际上把设计跟特定的屏幕大小绑定了。响应式设计应该跟显示它的设备无关才对，而不是只在某些屏幕中才最合适。断点应该由项目设计决定。

最小宽度媒体查询: 可以使用不同的长度单位指定:
```css
@media screen and (min-width: 50em) {
    /* 样式 */
}
```
`@media`告诉浏览器这是媒体查询。媒体查询外面写第一条规则，针对的是所有媒体的基本样式。在此基础上,在针对不同能力设备加以扩展。

> 基本上所有浏览器默认的文本大小都是 16px, 因此用像素值除以16就可以得到 rem 值。

# 媒体查询
CSS3 规范分成很多模块，媒体查询(3级)只是其中一个模块。利用媒体查询，可以根据设备的能力应用特定的 CSS 样式。除了 IE8 及以下版本，几乎所有浏览器都支持。

CSS3 媒体查询可以让我们针对特定设备能力或条件为网页应用特定 CSS 样式。媒体查询可以使用条件逻辑。

使用方法： 
1. 在`link`标签中使用媒体查询
    ```html
    <link rel="stylesheet" media="screen and (orientation: portrait)" herf="portrait-screen.css"/>
    ```
    组合媒体查询: 可以将多个媒体查询串在一起，使用逗号分给每个媒体查询表达式。注意，如果在 `projection`(投影机)之后可以没有任何特性/值对,表示适用任何投影机，这样省略特定特征，表示适用于任何特性的该媒体类型。

    > 任何长度单位都可以用来指定媒体查询条件。800像素等于50em。

    可以使用`@import`导入CSS时使用媒体查询，有条件的添加样式
    
    ```css
    @import url("phone.css") screen and (max-width:360px);
    ```

    CSS 中 `@import` 会增加 HTTP 请求(进而影响加载速度)，慎用。

2. 在 CSS 中使用媒体查询:
最常见的是在CSS内部直接使用媒体查询。

    注意： 在多数情况下，并不需要指定 `screen` 因为针对所有设备的媒体查询中， 可以使用简写语法，即省略 `all` 及其后的 `and`。如果不指定关键字，则关键字就是 `all`。除非要针对特定媒体类型应用样式，否则不要写 `screen and`

## 媒体查询特性
- width: 视口宽度
- height: 视口高度
- device-width: 渲染表面宽度(可认为是屏幕的宽度)
- device-height: 渲染表面高度(可认为是屏幕的高度)
- orientation: 设备方向是水平还是垂直
- aspect-ratio: 视口宽高比。16:9 写成 16/9
- color: 颜色组分的位深。`min-color:16`表设备至少支持16位深
- color-index: 设备颜色查找表中条目数，不能为负数
- monochrome: 单色帧缓冲中表示每个像素的位数
- resolution: 屏幕或打印分辨率
- scan: 针对电视的逐行扫描progressive和隔行扫描interlace
- grid: 设备基于栅格还是位图

除了 scan 和 grid 都可以加上min或max前缀以指定范围。
## 媒体查询注意事项
1. 使用媒体查询链接不同的 CSS 文件: 现在浏览器知道那些样式表必须立即分析，哪些样式可以等到页面初始渲染结束后再处理。不符合媒体查询条件的 CSS 文件可以延缓执行(deferred),到页面初始加载后再处理。
    > 阻塞渲染仅是指资源是否会暂停浏览器首次页面渲染，无论 CSS是否阻塞渲染，资源都会被下载，只是说非阻塞性资源优先级较低而已。
2. 分割媒体查询利弊: 多一个文件要多一个 HTTP 请求，太多 HTTP 请求影响性能。
    
    提升性能考虑流程:
    - 所有图片都压缩过了
    - 所有脚本都拼接和缩短了
    - 所有资源都采用 gzip 压缩
    - 所有静态内容都缓存到了 CDN
    - 所有多余的 CSS 规则都被清除了
3. 把媒体查询写在常规样式表中:
   
   相对于组合媒体查询，更好的是把媒体查询写在需要的地方
   ```css
   .a {width: 50%;}
   @media min-width: 30rem {.a{width: 75%;}}
   .b {width: 65%;}
   @media min-width: 30rem {.b{width: 75%;}}
   ```
   这样更利于维护 CSS 样式。也可以使用 CSS 预处理器和后处理器使用。
   > 如果希望合并所有条件相同的媒体查询，可以使用构建工具 Grunt 和 Gulp

## 视口 `meta`标签
`<meta>` 标签应该放在 `<head>`中，可以设置具体宽度或比例。

- initial-scale 指定内容放大、缩小倍数
- width=device-width 告诉浏览器页面等于设备宽度
- maximum-scale 最大放大倍数
- user-scalable=no 禁止缩放

## 媒体查询4级
1. 可编程:
   
   ```css
   @media (scripting: none) {
       /* 没有JS的样式 */
   }
   @media (scripting: enabled) {
       /* 有JS的样式 */
   }
   @media (scripting: initial-only) {
       /* JS只在一开始有效的样式，如打印，一开始用 JS 排版 */
   }
   ```
2. 指针特性: 查询鼠标之类指针设备是否存在。有三个值: none、 coarse(代表触摸屏设备中手指)和fine(鼠标，手写笔等精确指针设备)
   ```css
   @media (pointer: fine) {
       /* 针对精确指针形式 */
   }
   ```
   最保险用法假设用户使用触屏设备，并相应把界面元素放大，这样即使用户使用鼠标，也不影响体验。
3. 悬停媒体特性: 测试用户是否可以通过某种机制实现屏幕上悬停的。如有多种输入机制(触摸或鼠标)，则检查主输入机制。没有悬停能力，用 none， 悬停但必须经过一定启动步骤，使用 on-demand， 可以悬停，用 hover；
   ```css
   @media (hover: on-demand) {
       /* 针对可通过启用程序实现悬停用户样式 */
   }
   ```
4. 环境媒体特性: 根据环境改变设计。比如颜色
   ```css
   @media (light-level: normal) {
       /* 针对标准亮度的样式 */
   }
   ```
# 弹性布局与响应式图片
# HTML5 与响应式 Web 设计
# CSS3 新特性
# CSS3 高级技术
# SVG 与响应式 Web 设计
# CSS3 过渡、变形和动画
# 表单
# 实现响应式 Web 设计
